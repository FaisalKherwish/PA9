//Object Manager File

#ifndef PA9
#define PA9

#include <iostream>
#include <string>
#include <SFML/Graphics.hpp>
#include <ctime>
#include <cstdlib>

class ObjectManager
{
public:
	ObjectManager();
	~ObjectManager();

	void setSprite(sf::Texture& texture);
	void setName(std::string newName);
	void setVelocity(const int newVelocity = 0);
	void setSliced(bool newBool);

	sf::CircleShape& getShape();
	std::string getName();
	bool getSliced();

	void changeColor(sf::Color newColor);

	void draw(sf::RenderWindow& window);

	

	void gravity();

private:

	sf::CircleShape shape;
	std::string name;
	sf::Vector2f mVelocity;
	bool is_Sliced;
};

#endif

// CPP
//ObjectManager.cpp

#include "ObjectManager.hpp"

ObjectManager::ObjectManager()
{
	std::srand(std::time(nullptr));

	double 	x = rand() % 1000;

	sf::CircleShape s1(100.f);
	this->name = "";
	this->shape = s1;
	this->is_Sliced = false;

	shape.setFillColor(sf::Color::Cyan);
	shape.setRadius(50);
	shape.setPosition(sf::Vector2f(x, 1200));

	this->mVelocity = sf::Vector2f(0.f, -500.f); // initial "upward" throw velocity

}

ObjectManager::~ObjectManager()
{
	this->shape.setFillColor(sf::Color::Transparent);
}

sf::CircleShape& ObjectManager::getShape()
{
	return this->shape;
}


void ObjectManager::gravity()
{
	if (mVelocity.y < 0) mVelocity.y += 0.15f;
	else mVelocity.y += 0.15f;
	
	shape.move(mVelocity* 0.001f);
}

void ObjectManager::setSprite(sf::Texture& texture)
{
	this->shape.setTexture(&texture);
}

void ObjectManager::setName(std::string newName)
{
	this->name = newName;
}

void ObjectManager::setVelocity(const int newVelocity)
{
	this->mVelocity.y = newVelocity;
}

void ObjectManager::setSliced(bool newBool)
{
	this->is_Sliced = newBool;
}

std::string ObjectManager::getName()
{
	return this->name;
}

bool ObjectManager::getSliced()
{
	return this->is_Sliced;
}

void ObjectManager::changeColor(sf::Color newColor)
{
	this->shape.setFillColor(newColor);

}

void ObjectManager::draw(sf::RenderWindow& window)
{
	window.draw(this->shape);
}

